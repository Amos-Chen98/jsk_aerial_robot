<?xml version="1.0"?>

<launch>
  <arg name="pwm_config_file" default="$(find motor_test)/config/general.yaml" />

  <node name="power_node"  pkg="takasako_sps" type="scpi_tcp_client_node" output="screen" />

  <node name="forces_node" pkg="cfs_sensor" type="cfs_node"  output="screen"/>

  <include file="$(find spinal_ros_bridge)/launch/serial.launch" >
    <arg name="baud" value="921600" />
  </include>

  <node name="motor_test_node" pkg="motor_test" type="motor_test_node"  output="screen">
    <rosparam file="$(arg pwm_config_file)" command="load" />
    <remap from="/forces" to="/cfs/forces" />
    <remap from="/power_pwm" to="/pwm_test" />
  </node>

  <arg name="node_start_delay" default="3.0" />
  <node name="set_uav_info" pkg="motor_test" type="set_uav_info" output="screen" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' " />

</launch>
